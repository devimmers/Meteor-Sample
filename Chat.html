<head>
  <title>Chat</title>
</head>

<body>
  <div class="container">
			{{> register}}
      {{> chat}}
    </div>
  </div>
</body>

<template name="register">
  {{#unless signed_in}}
  <div id="register_window">
    <form id="register_form">
      <div id="warning">{{warning}}</div>
      <div class="control-group">
        <label>Username: </label>
          <div class="controls">
            <div class="input-append">
              <input type="text" id="register" placeholder="Enter Username" />
              <button id="login-btn" class="btn btn-success">Login</button>
            </div>
          </div>
      </div>
    </form>
  </div>
  {{/unless}}
</template>

<template name="chat">
	{{#if signed_in}}
		<div class="row">
			<div class="span3">{{> users_names}}
				<div>
					<button type="button" id="logout-btn">Logout</button>
				</div>
			</div>
			<div class="span9">{{> messages}}</div>
		</div>
		<div class="row">
			<div class="span12">{{> entry}}</div>
		</div>
	{{/if}}
</template>

<template name="entry">
	<div class="input-append">
		<input type="text" id="messageBox" placeholder="Your Message" class="span12"/>
		<button id="send-message" class="btn btn-primary">Send</button>
		<button id="clear-messages" class="btn">Clear</button>
	</div>
</template>

<template name="users_names">
    <div id="users">
    	<h3>Users online</h3>
    	<ul class="nav nav-pills nav-stacked">
	      {{#each users}}
	      <li><a href="#{{name}}" title="Whisper to {{name}}">{{name}}</a></li>
	      {{/each}}
    	</ul>
    </div>
</template>

<template name="messages">
	{{#each messages}}
		{{> message}}
	{{/each}}
</template>

<template name="message">
	<p>{{time}}: <strong>{{name}}:</strong>{{message}}</p>
</template>